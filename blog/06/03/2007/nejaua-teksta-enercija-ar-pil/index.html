
<!DOCTYPE html>
<html lang="lv">
  <head>
    <meta charset="utf-8" />
    <title>Gatis Tomsons: nejauša teksta ģenerācija ar pil</title>
    
    <meta name="description" content="Gata Tomsona tīmekļa vietne" />
    
    <meta content="index, follow" name="robots" />
    <meta content="Gatis Tomsons" name="author" />
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400|Jura:300" rel="stylesheet" type="text/css" />
    <link href="http://gacha.id.lv/atom.xml" rel="alternate" title="Raksti RSS formātā" type="application/atom+xml" />
    <link href="/assets/css/global.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/assets/css/pygments_pastie.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/assets/css/colorbox.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>
    <script src="/assets/js/jquery.colorbox-min.js" type="text/javascript"></script>
    <script src="/assets/js/jquery.timeago.js" type="text/javascript"></script>
  </head>
  <body>
    <header>
      <a href="/">
        <h1>Gatis Tomsons</h1>
        <h2>rocket science</h2>
      </a>
    </header>
    <nav>
      <ul>
        <li><a href="/">Sākums</a></li>
        <li><a href="/arhivs.html">Rakstu arhīvs</a></li>
      </ul>
    </nav>
    <section id="content">
<article>
  <h1>Nejauša teksta ģenerācija ar PIL</h1> 
  <div class="body">

		
			
<p>Izveidoju mazu Python funkciju, kura ģenerē mazu bildīti, kur ir attēloti pirmie 3 burti no nejauši izvēlētiem vārdiem. Nav nekādu efektu vai citu fīču, kā <em>saķeburot</em> attēlu, jo tas man nav nepieciešams, pret parastajiem botiem ar šito pilnībā pietiek.  <br />
</p>
<p /><div class="source"><pre><span class="k">import</span> <span class="nn">re</span><span class="o">,</span><span class="nn">random</span><span class="o">,</span><span class="nn">Image</span><span class="o">,</span><span class="nn">ImageDraw</span><span class="o">,</span><span class="nn">ImageFont</span>

<span class="k">def</span> <span class="nf">im_gen</span><span class="p">():</span>
	<span class="n">im</span> 	<span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s">&#39;RGB&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">30</span><span class="p">),</span> <span class="s">&#39;white&#39;</span><span class="p">)</span>
	<span class="n">draw</span> 	<span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
	<span class="n">font</span> 	<span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="s">&#39;StayPuft.ttf&#39;</span><span class="p">,</span><span class="mi">21</span><span class="p">)</span>
	<span class="n">text</span> 	<span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;[^\w]&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">,</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s">&#39;/usr/share/dict/words&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">readlines</span><span class="p">()))[:</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
	<span class="n">size</span>	<span class="o">=</span> <span class="n">font</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
	<span class="n">draw</span><span class="o">.</span><span class="n">text</span><span class="p">(((</span><span class="mi">50</span> <span class="o">-</span> <span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">),</span> <span class="n">text</span><span class="p">,</span><span class="n">font</span><span class="o">=</span><span class="n">font</span><span class="p">,</span><span class="n">fill</span><span class="o">=</span><span class="s">&#39;red&#39;</span><span class="p">)</span>
	<span class="n">im</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;im.jpg&#39;</span><span class="p">,</span> <span class="s">&quot;JPEG&quot;</span><span class="p">,</span><span class="n">quality</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>


<p><img src="http://gacha.id.lv/rand_code/" alt="Nejauši burtiņi" />
</p>

		
	</div>
  <div class="clear"></div>
  <div class="pagination">
    <ul>
    
      <li class="prev"><a href="/blog/04/03/2007/mana-jaun-dulkore" title="Mana jaunā duālkore">&larr; Iepriekšējais</a></li>
    
      <li><a href="/arhivs.html">Rakstu arhīvs</a></li>
    
      <li class="next"><a href="/blog/21/03/2007/wine-smuks-krss" title="Wine smukās krāsās">Nākamais &rarr;</a></li>
    
    </ul>
  </div>
  
</article>
<aside>
  <h4>Publicēts</h4>
  <time datetime="2007-03-06 00:00:00 +0200">2007. gada  6. martā</time>
  
    <h4>Tagi</h4>
    <ul class="tag_box">
    
    


  
     
    	<li><a href="/tagi.html#python-ref">python <span>9</span></a></li>
     
    	<li><a href="/tagi.html#kods-ref">kods <span>6</span></a></li>
    
  



    </ul>
    <br class="clear" />
  
  <g:plusone annotation="inline"></g:plusone>
  <script type="text/javascript">
    window.___gcfg = {lang: 'lv'};
    (function() {
      var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      po.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
  </script>
</aside>
<div class="clear"></div></section>
    <footer id="footer">
      <p>© 2006-2015 Gatis Tomsons</p>
    </footer>
    
  </body>
</html>
