
<!DOCTYPE html>
<html lang="lv">
  <head>
    <meta charset="utf-8" />
    <title>Gatis Tomsons: tabulu rindu krāsošana ar prototype</title>
    
    <meta name="description" content="Gata Tomsona tīmekļa vietne" />
    
    <meta content="index, follow" name="robots" />
    <meta content="Gatis Tomsons" name="author" />
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="http://fonts.googleapis.com/css?family=Comfortaa:700|Jura:300" rel="stylesheet" type="text/css" />
    <link href="http://gacha.id.lv/atom.xml" rel="alternate" title="Raksti RSS formātā" type="application/atom+xml" />
    <link href="/assets/css/global.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/assets/css/pygments_pastie.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/assets/css/colorbox.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>
    <script src="/assets/js/jquery.colorbox-min.js" type="text/javascript"></script>
    <script src="/assets/js/jquery.timeago.js" type="text/javascript"></script>
  </head>
  <body>
    <header>
      <a href="/">
        <h1>Gatis Tomsons</h1>
        <h2>ruby, web, linux, mtb</h2>
      </a>
    </header>
    <nav>
      <ul>
        <li><a href="/">Sākums</a></li>
        <li><a href="/arhivs.html">Rakstu arhīvs</a></li>
        <li><a href="/lapas-karte.html">Viss cits</a></li>
      </ul>
    </nav>
    <section id="content">
<article>
  <h1>Tabulu rindu krāsošana ar Prototype</h1> 
  <div class="body">

		
			
<p>Bieži attēlojot datus tabulā tie nav ļoti labi pārskatāmi, jo dažkārt tabula ir ļoti plata ar daudz kolonnām, tādējādi ir grūti saprast, kur rinda sākas un kur tā īsti beidzas. Tāpēc ir ļoti patīkami, ja uzklikšķinot uz rindas tā iekrāsojas un uzklikšķinot vēlreiz tā iegūst iepriekšējo izskatu.  <br />
</p>
<p>Pirmais ko izdaram ir izveidojam divas CSS klases, vienu kad rinda ir aktīva un vienu, kad nav aktīva:  <br />
</p>
<p /><div class="source"><pre><span class="nc">.row_normal</span> <span class="p">{</span>
	<span class="k">background-color</span><span class="o">:</span> <span class="m">#fff</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.row_higlighted</span> <span class="p">{</span>
	<span class="k">background-color</span><span class="o">:</span> <span class="m">#f5f5f5</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
 <br />

<p>Kā nākamo mēs varētu izveidot pašu tabulu, kurai piešķiram arī ID atribūtu, manā gadījumā <code>id=&quot;dati&quot;</code>. Kad tabula ar datiem ir izveidota, kā arī CSS ir ielikt pareizā vietā, tad atliek vien izveidot šo JavaScript koda gabalu:  <br />
</p>
<p /><div class="source"><pre><span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="k">function</span><span class="p">(){</span>
	<span class="k">var</span> <span class="nx">rows</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;dati&#39;</span><span class="p">).</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">);</span>
	<span class="k">var</span> <span class="nx">nodes</span> <span class="o">=</span> <span class="nx">$A</span><span class="p">(</span><span class="nx">rows</span><span class="p">);</span>
	
	<span class="nx">nodes</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="nx">node</span><span class="p">){</span>
		<span class="nx">Event</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">node</span><span class="o">,</span> <span class="s1">&#39;click&#39;</span><span class="o">,</span> <span class="k">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
			<span class="k">if</span><span class="p">(</span><span class="nx">Element</span><span class="p">.</span><span class="nx">hasClassName</span><span class="p">(</span><span class="nx">node</span><span class="o">,</span> <span class="s1">&#39;row_higlighted&#39;</span><span class="p">)){</span>
				<span class="nx">Element</span><span class="p">.</span><span class="nx">removeClassName</span><span class="p">(</span><span class="nx">node</span><span class="o">,</span><span class="s1">&#39;row_higlighted&#39;</span><span class="p">);</span>
				<span class="nx">Element</span><span class="p">.</span><span class="nx">addClassName</span><span class="p">(</span><span class="nx">node</span><span class="o">,</span> <span class="s1">&#39;row_normal&#39;</span><span class="p">);</span>
			<span class="p">}</span><span class="k">else</span><span class="p">{</span>
				<span class="nx">Element</span><span class="p">.</span><span class="nx">removeClassName</span><span class="p">(</span><span class="nx">node</span><span class="o">,</span><span class="s1">&#39;row_normal&#39;</span><span class="p">)</span>
				<span class="nx">Element</span><span class="p">.</span><span class="nx">addClassName</span><span class="p">(</span><span class="nx">node</span><span class="o">,</span> <span class="s1">&#39;row_higlighted&#39;</span><span class="p">);</span>	
			<span class="p">}</span>
		<span class="p">});</span>
	<span class="p">});</span>
<span class="p">}</span>
</pre></div>
 <br />

<p>kuru ievietojam kaut kur starp <code>HEAD</code> tagiem. Un tas ir arī viss, pārlādējot lapu, mūsu koda gabals katrai tabulas rindai piešķirs <em>notikumu</em> <code>onclick=&quot;&quot;</code>, kurš izpildīsies uzspiežot uz tās.  <br />
</p>
<p>Piemirsu pašu galveno, viss augšup minētais darbojas pateicoties <a href="http://prototype.conio.net/">Prototype</a> bibliotēkai, kuru nepieciešams iekļaut virs šī skripta. 
</p>
<p><strong>EDIT:</strong> atradu gatavu risinājumu <a href="http://thinkof.net/projects/js/highlight/highlight.html">šeit</a>
</p>

		
	</div>
  <div class="clear"></div>
  <div class="pagination">
    <ul>
    
      <li class="prev"><a href="/blog/13/12/2006/web-programmanas-valodas" title="Web programmēšanas valodas">&larr; Iepriekšējais</a></li>
    
      <li><a href="/arhivs.html">Rakstu arhīvs</a></li>
    
      <li class="next"><a href="/blog/22/01/2007/sniegs" title="Sniegs">Nākamais &rarr;</a></li>
    
    </ul>
  </div>
  
</article>
<aside>
  <h4>Publicēts</h4>
  <time datetime="2006-12-19 00:00:00 +0200">2006. gada 19. decembrī</time>
  
    <h4>Tagi</h4>
    <ul class="tag_box">
    
    


  
     
    	<li><a href="/tagi.html#web-ref">web <span>8</span></a></li>
     
    	<li><a href="/tagi.html#javascript-ref">javascript <span>1</span></a></li>
     
    	<li><a href="/tagi.html#kods-ref">kods <span>6</span></a></li>
    
  



    </ul>
    <br class="clear" />
  
  <g:plusone annotation="inline"></g:plusone>
  <script type="text/javascript">
    window.___gcfg = {lang: 'lv'};
    (function() {
      var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      po.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
  </script>
</aside>
<div class="clear"></div></section>
    <footer id="footer">
      <p>© 2006-2012 Gatis Tomsons</p>
      <p>
        <a href="http://validator.w3.org/check?url=http://gacha.id.lv/blog/19/12/2006/tabulu-rindu-krsoana-ar-prototype&amp;charset=utf-8">
          <img alt="Valid HTML5" src="/assets/images/w3c-html5.gif" />
        </a>
      </p>
    </footer>
    
  </body>
</html>