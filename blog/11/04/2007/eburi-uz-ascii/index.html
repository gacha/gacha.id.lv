
<!DOCTYPE html>
<html lang="lv">
  <head>
    <meta charset="utf-8" />
    <title>Gatis Tomsons: Ķeburi uz ascii</title>
    
    <meta name="description" content="Gata Tomsona tīmekļa vietne" />
    
    <meta content="index, follow" name="robots" />
    <meta content="Gatis Tomsons" name="author" />
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400|Jura:300" rel="stylesheet" type="text/css" />
    <link href="http://gacha.id.lv/atom.xml" rel="alternate" title="Raksti RSS formātā" type="application/atom+xml" />
    <link href="/assets/css/global.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/assets/css/pygments_pastie.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/assets/css/colorbox.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>
    <script src="/assets/js/jquery.colorbox-min.js" type="text/javascript"></script>
    <script src="/assets/js/jquery.timeago.js" type="text/javascript"></script>
  </head>
  <body>
    <header>
      <a href="/">
        <h1>Gatis Tomsons</h1>
        <h2>rocket science</h2>
      </a>
    </header>
    <nav>
      <ul>
        <li><a href="/">Sākums</a></li>
        <li><a href="/arhivs.html">Rakstu arhīvs</a></li>
      </ul>
    </nav>
    <section id="content">
<article>
  <h1>Ķeburi uz ASCII</h1> 
  <div class="body">

		
			
<p>Ir sastopamas dažādas <em>slugify</em> funkcijas, kuras no teksta izvelk ārā nevēlamos simbolus un padara to drošu web adresēm vai kur citur, bet nepatīkamākais ir tas, ka tiek izmesti arī mūsu latveišu burti ar garumzīmēm, tad izsaucot šo funkciju, pirms <em>slugify</em> mēs nepazaudēsim teksta jēgu.
</p>
<p /><div class="source"><pre><span class="c"># -*- coding: utf-8 -*-</span>

<span class="k">def</span> <span class="nf">lv_to_ascii</span><span class="p">(</span><span class="n">in_string</span><span class="p">):</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_string</span><span class="p">,</span><span class="nb">unicode</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">u&#39;Tekstam jabūt unicode&#39;</span><span class="p">)</span>
	<span class="n">repl</span> <span class="o">=</span> <span class="p">{</span>
		<span class="s">u&#39;ā&#39;</span> 	<span class="p">:</span> <span class="s">&#39;a&#39;</span><span class="p">,</span>
		<span class="s">u&#39;č&#39;</span>	<span class="p">:</span> <span class="s">&#39;c&#39;</span><span class="p">,</span>
		<span class="s">u&#39;ē&#39;</span>	<span class="p">:</span> <span class="s">&#39;e&#39;</span><span class="p">,</span>
		<span class="s">u&#39;ģ&#39;</span>	<span class="p">:</span> <span class="s">&#39;g&#39;</span><span class="p">,</span>
		<span class="s">u&#39;ī&#39;</span>	<span class="p">:</span> <span class="s">&#39;i&#39;</span><span class="p">,</span>
		<span class="s">u&#39;ķ&#39;</span>	<span class="p">:</span> <span class="s">&#39;k&#39;</span><span class="p">,</span>
		<span class="s">u&#39;ļ&#39;</span>	<span class="p">:</span> <span class="s">&#39;l&#39;</span><span class="p">,</span>
		<span class="s">u&#39;ņ&#39;</span>	<span class="p">:</span> <span class="s">&#39;n&#39;</span><span class="p">,</span>
		<span class="s">u&#39;š&#39;</span>	<span class="p">:</span> <span class="s">&#39;s&#39;</span><span class="p">,</span>
		<span class="s">u&#39;ū&#39;</span>	<span class="p">:</span> <span class="s">&#39;u&#39;</span><span class="p">,</span>
		<span class="s">u&#39;ž&#39;</span>	<span class="p">:</span> <span class="s">&#39;z&#39;</span>
	<span class="p">}</span>
	<span class="n">out_string</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
	<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">in_string</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
		<span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">repl</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
			<span class="n">out_string</span> <span class="o">+=</span> <span class="n">repl</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">out_string</span> <span class="o">+=</span> <span class="n">i</span>
	<span class="k">return</span> <span class="n">out_string</span>
</pre></div>


<p>Funkcijai padodot <code>glāžšķūņrūķītis</code> mēs dabūtu <code>glazskunrukitis</code>.
</p>

		
	</div>
  <div class="clear"></div>
  <div class="pagination">
    <ul>
    
      <li class="prev"><a href="/blog/10/04/2007/viendu-attlu-meklana-un-dzana" title="Vienādu attēlu meklēšana un dzēšana">&larr; Iepriekšējais</a></li>
    
      <li><a href="/arhivs.html">Rakstu arhīvs</a></li>
    
      <li class="next"><a href="/blog/23/04/2007/teksta-redaktors---scribes" title="Teksta redaktors - Scribes">Nākamais &rarr;</a></li>
    
    </ul>
  </div>
  
</article>
<aside>
  <h4>Publicēts</h4>
  <time datetime="2007-04-11 00:00:00 +0300">2007. gada 11. aprīlī</time>
  
    <h4>Tagi</h4>
    <ul class="tag_box">
    
    


  
     
    	<li><a href="/tagi.html#python-ref">python <span>9</span></a></li>
     
    	<li><a href="/tagi.html#kods-ref">kods <span>6</span></a></li>
    
  



    </ul>
    <br class="clear" />
  
  <g:plusone annotation="inline"></g:plusone>
  <script type="text/javascript">
    window.___gcfg = {lang: 'lv'};
    (function() {
      var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      po.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
  </script>
</aside>
<div class="clear"></div></section>
    <footer id="footer">
      <p>© 2006-2015 Gatis Tomsons</p>
    </footer>
    
  </body>
</html>
